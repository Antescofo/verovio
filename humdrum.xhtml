---
layout: verovio
title: Humdrum Input
active: other-formats
other-active: humdrum
version-footer: true
vim: ts=3
---

<style>

[id$="-code"] {
	tab-size: 18;
}

#repdiv {
	padding-top: 60px;
}

#repdiv ul {
	margin: 0;
	padding: 0;
}

</style>

<div class="row">
	<div class="col-md-3 sidebar-offcanvas" id="sidebar" role="navigation">
		<div class="panel panel-default">
			{% include other-sidebar.html %}
		</div>
	</div>
	
	<div class="col-md-9">
		<div class="panel-body">
			<h3>Humdrum Input</h3>
			<p>
				Humdrum data is an analytic music code for transcribing full
				polyphonic textures.  Humdum syntax presents notes of the score
				in strict time sequence.  Each row represents all notes sounding or
				events occurring at a given time, and each column traces the
				melodic line of the individual parts. More information about the
				syntax is available on the
				<a target="_blank" href="http://www.humdrum.org">Humdrum</a>
				website.
			</p>

			<p>
				The following example from Mozart's
				piano sonata in F major, K<sup>1</sup>&#160;280
				(K<sup>6</sup>&#160;189e), mvmt.&#160;1, is generated dynamically
				inside this page from the Humdrum data that follows.

			</p>
			
			<div id="humdrum1-svg" style="overflow:auto;"/>

			<p>
			The data consists of three separate streams of information, called
			<i>spines</i> that usually consist of one column, but sometime more.
			The first column represents music on the bottom staff,
			the second column represents the top staff, and the third column
			contains the dynamics, which in this case apply to both staves.
			</p>

			<p>
				<div class="highlight"><pre><code id="humdrum1-code"></code></pre></div>
			</p>


			<p>
			View the full score in the interactive
			<a target="_blank" href="http://verovio.humdrum.org/?file=mozart/sonatas/sonata02-1.krn">Verovio Humdrum Viewer</a>,
			which is a special-purpose web interface to Verovio for Humdrum data.
			When on a VHV notation page, try pressing the key "p" to view the scan
			of the original print from which the musical data was encoded.  Also
			try pressing "m" to view the internal conversion to MEI data.  Vi users
			can try pressing "v" to toggle between the basic and vim modes for the
			text editor.
			</p>

			<p>
			The above data is in the standard tab-separated-value (TSV) format for
			Humdrum data.  For situations where tabs may be munged, Verovio can
			also import Humdrum data in the comma-separated-value (CSV) format:
			</p>

			<p>
				<div id="humdrum2-svg" style="overflow:auto;"/>
				<div class="highlight"><pre><code id="humdrum2-code"></code></pre></div>
			</p>

			<p>
			In the <a target="_blank" href="http://verovio.humdrum.org/?file=mozart/sonatas/sonata02-1.krn">Verovio Humdrum Viewer</a>,
			try pressing the comma key "," to toggle between TSV and CSV versions
			of the Humdrum data.
			</p>

			<h4> Command-line usage </h4>

			<p>
			To typeset music in the Humdrum format on the command-line:
			{% highlight bash %}
			$ verovio -f humdrum input.krn -o output.svg
			{% endhighlight %}
			</p>

			<p>
			You can usually use the auto-detection feature of verovio by omitting
			the <tt>-f</tt> option.
			{% highlight bash %}
			$ verovio input.krn -o output.svg
			{% endhighlight %}
			</p>

			<p>
			The output filename will have the same basename as the input if the
			<tt>-o</tt> option is not given, so in this case the output will be
			called <tt>file.svg</tt>.
			{% highlight bash %}
			$ verovio file.krn
			{% endhighlight %}
			</p>

			<p>
			Standard input/output can be used with the verovio command by giving a
			dash for standard input and <tt>-o -</tt> to send the output to
			standad output.
			{% highlight bash %}
			$ cat input.krn | verovio - -o - > output.svg
			{% endhighlight %}
			</p>

			<p>
			To convert to MEI data:
			{% highlight bash %}
			$ verovio file.krn --no-layout --all-pages -t mei
			{% endhighlight %}
			</p>

			<h4> Javascript usage </h4>

			<p>
			See the
			<a target="_blank" href="http://www.humdrum.org/vhv-demos">VHV demos</a>
			website for demonstrations for how to use the JavaScript toolkit
			version of Verovio specifically when using Humdrum data as input.
			</p>

			<div style="height:100px;"></div>
		</div>
	</div>
	
</div>

<script type="text/javascript">
//<![CDATA[

var zoom = 33.5;
var pageHeight = 1000;
var pageWidth = 2000;
var spacingStaff = 0;
var border = 20;
var adjustPageHeight = 1;
var vrvToolkit = new verovio.toolkit();

function load_data(data, output_div) {
	options = JSON.stringify({
		inputFormat: 'humdrum',
		pageHeight: pageHeight,
		pageWidth: pageWidth,
		adjustPageHeight: adjustPageHeight,
		spacingStaff: spacingStaff,
		border: border,
		scale: zoom
	});

	var svg = vrvToolkit.renderData(data, options);
	output_div.html(svg);
}


$(document).ready(function() {
	displayRepertory();
	renderAllExamples();
});


$(window).resize(function() {
	renderAllExamples();
});


function renderAllExamples() {
	var examples = getExampleNumbers();
	for (var i=0; i<examples.length; i++) {
		var selector = "#humdrum" + examples[i];
		var kern = $(selector + "-data").text();
		var targetWidth = $(selector + "-code").parent().width();
		if ((targetWidth > 0)) {
			zoom = (targetWidth + border)/ pageWidth * 100;
		}
		$(selector + '-code').html(kern);
		load_data($(selector + "-data").text(), $(selector + "-svg"));
	}
}


function getExampleNumbers() {
   var nums = {};
   var list = document.querySelectorAll("[id^='humdrum']");
   var matches;
   for (var i=0; i<list.length; i++) {
	  if (matches = list[i].id.match(/humdrum(\d+)/)) {
		 nums[matches[1]] = 1;
	  }
   }
   return Object.keys(nums);
}


function displayRepertory() {
	var sidebar = document.querySelector("#sidebar");
	var newdiv = document.createElement("div");
	newdiv.id = "repdiv";
	var content = document.querySelector("#repertories").innerHTML;
	newdiv.innerHTML = content;
	sidebar.appendChild(newdiv);
}

//]]>
</script>


<script id="humdrum1-data" type="text/x-humdrum">!!!COM: Mozart, Wolfgang Amadeus
!!!OTL: Piano Sonata No. 2 in F major
!!!OMV: 1
!!!SCT1: K<sup>1</sup> 280
!!!SCT2: K<sup>6</sup> 189e
!!!OMD: Allegro assai
**kern	**kern	**dynam
*staff2	*staff1	*staff1/2
*clefF4	*clefG2	*clefG2
*k[b-]	*k[b-]	*k[b-]
*F:	*F:	*F:
*M3/4	*M3/4	*M3/4
*MM152	*MM152	*MM152
=1-	=1-	=1-
4FF 4F	4c: 4f: 4a: 4cc:	f
4C	4a/ 4cc/	.
4AA	4a/ 4cc/	.
=2	=2	=2
4FF	4.a/ 4.cc/	.
4FFF	.	.
.	(16ddLL	.
.	16ccJJ	.
4r	16b-LL	.
.	16a	.
.	16g	.
.	16fJJ	.
=3	=3	=3
8F 8AL	4ff	.
8F 8A	.	.
8F 8G 8B-	4ee	.
8F 8G 8B-	.	.
8F 8A 8c	4ee-)	.
8F 8A 8cJ	.	.
=4	=4	=4
8F 8B- 8dL	4dd	.
8F 8B- 8d	.	.
8F 8B- 8d	4r	.
8F 8B- 8d	.	.
8F 8B- 8d	4r	.
8F 8B- 8dJ	.	.
=5	=5	=5
8F 8G 8eL	(8ccL	p
8F 8G 8e	8b-J)	.
8F 8G 8e	4b-'	.
8F 8G 8e	.	.
8F 8G 8e	4r	.
8F 8G 8eJ	.	.
=6	=6	=6
*-	*-	*-
</script>

<script id="humdrum2-data" type="text/x-humdrum">!!!COM: Mozart, Wolfgang Amadeus
!!!OTL: Piano Sonata No. 2 in F major
!!!OMV: 1
!!!SCT1: K1 280
!!!SCT2: K6 189e
!!!OMD: Allegro assai
**kern,**kern,**dynam
*staff2,*staff1,*staff1/2
*clefF4,*clefG2,*clefG2
*k[b-],*k[b-],*k[b-]
*F:,*F:,*F:
*M3/4,*M3/4,*M3/4
*MM152,*MM152,*MM152
=1-,=1-,=1-
4FF 4F,4c: 4f: 4a: 4cc:,f
4C,4a/ 4cc/,.
4AA,4a/ 4cc/,.
=2,=2,=2
4FF,4.a/ 4.cc/,.
4FFF,.,.
.,(16ddLL,.
.,16ccJJ,.
4r,16b-LL,.
.,16a,.
.,16g,.
.,16fJJ,.
=3,=3,=3
8F 8AL,4ff,.
8F 8A,.,.
8F 8G 8B-,4ee,.
8F 8G 8B-,.,.
8F 8A 8c,4ee-),.
8F 8A 8cJ,.,.
=4,=4,=4
8F 8B- 8dL,4dd,.
8F 8B- 8d,.,.
8F 8B- 8d,4r,.
8F 8B- 8d,.,.
8F 8B- 8d,4r,.
8F 8B- 8dJ,.,.
=5,=5,=5
8F 8G 8eL,(8ccL,p
8F 8G 8e,8b-J),.
8F 8G 8e,4b-',.
8F 8G 8e,.,.
8F 8G 8e,4r,.
8F 8G 8eJ,.,.
=6,=6,=6
*-,*-,*-
</script>

<script id="repertories" type="text/plain">
<p>
Sample repertories of Humdrum data displayed in the Verovio Humdrum Viewer:
</p>

<p>
<ul>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=chorales">J.S. Bach chorales</a>
	(When viewing a chorale, type the "o" letter key to toggle view of the original historic clefs.)
</li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=mozart/sonatas">Mozart piano sonatas</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=beethoven/sonatas">Beethoven piano sonatas</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=beethoven/quartets">Beethoven string quartets</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=cc/chopin/mazurka">Chopin mazurkas</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=joplin">Works of Scott Joplin</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=jrp/Jos">Works of Josquin des Prez</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=jrp/Ock">Works of Johannes Ockeghem</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=jrp/Rue">Works of Pierre de la Rue</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=jrp/Ort">Works of Mabrianus de Orto</a></li>
<li> <a target="_blank" href="http://verovio.humdrum.org/?file=liederschatz1">Deutscher Liederschatz, Band I</a></li>
</ul>
</p>

</script>


